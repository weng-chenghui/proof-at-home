FROM debian:bookworm-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    curl ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# Receive the pre-built pah binary
ARG PAH_BINARY=target/release/pah
COPY ${PAH_BINARY} /usr/local/bin/pah
RUN chmod +x /usr/local/bin/pah

COPY tests/docker/test-tools.sh /workspace/tests/docker/test-tools.sh
RUN chmod +x /workspace/tests/docker/test-tools.sh

WORKDIR /workspace

CMD ["/workspace/tests/docker/test-tools.sh"]
